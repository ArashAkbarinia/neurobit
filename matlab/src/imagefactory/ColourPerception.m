function [ColourPerceptionImage, GroundTruthImage] = ColourPerception(scale)
%ColourPerception creates set of focal colours.
%   Explanation http://www.chrisharrison.net/index.php/Fun/ColorPerception
%
% inputs
%   scale  should the 30x9 board be scaled, default is 1.
%
% outputs
%   ColourPerceptionImage  the image if scale is not given in size 30x9.
%   GroundTruth            the probability map of eleven focal colours.
%

if nargin < 1
  scale = 1;
end

cboxes = zeros(9, 30, 3);
cboxes(:, :, 1) = ...
  [
  50   50   50   50   50   50    1    1    1    1    1    1    1    1    1    0    0    0    0    0    0    0    0    0    0   50   50   50   50   50;
  102  102  102  102  102  101   51    0    0    0    0    0    0    0    0    0    0    1    1    1    1    1    1    1   51  102  102  102  102  102;
  154  154  154  153  154  153  102   50    0    0    0    0    0    2    0    0    0    0    0    0    0    0    0   53  103  153  152  153  154  154;
  204  204  205  204  204  205  152  102   51    1    1    1    0    0    0    0    0    2    0    0    0    0   52  102  153  205  204  206  204  204;
  254  255  255  254  255  255  205  153  101   51    0    0    0    0    1    0    0    0    1    0    0   51  102  154  204  255  255  255  255  254;
  255  255  255  254  255  255  255  202  155  103   52   49   50   51   51   52   51   50   50   51   50  103  151  204  255  254  254  254  255  255;
  255  255  255  255  255  255  255  255  204  152  102  104  102  102  102  102  102  102  102  101  102  155  205  255  255  255  255  255  254  255;
  253  254  253  254  254  254  254  254  253  206  153  153  153  153  153  153  153  153  152  153  154  204  255  255  255  255  255  255  255  255;
  254  255  255  255  255  255  255  255  255  255  205  204  204  204  204  204  204  204  204  204  204  254  254  254  254  254  254  254  254  254;
  ];
cboxes(:, :, 2) = ...
  [
  0    0    0    0    0   51   51   51   51   51   51   51   51   51   51   51    0    0    0    0    0    0    0    0    0    0    0    0    0    0;
  0    0    0    0   50  102  102  102  102  102  102  102  102  102  102  103   52    0    0    0    0    0    0    0    0    0    0    0    0    0;
  0    0    0   52  102  154  152  153  153  153  153  153  153  152  152  152  101   51    0    0    0    0    0    0    0    0    0    1    0    0;
  0    0   51  102  153  204  203  204  204  204  204  204  205  204  204  204  153  101   51    0    0    0    1    0    0    0    0    0    0    0;
  0   51  101  153  204  255  255  254  255  255  255  255  254  255  255  255  204  153  101   51    0    0    1    0    0    0    0    1    0    0;
  51   99  153  204  254  255  254  255  254  254  255  255  255  255  255  254  255  204  153  102   51   51   51   51   50   51   51   51   50   49;
  102  154  204  255  255  255  255  255  254  255  255  254  254  254  254  254  254  254  203  153  101  102  102  102  102  102  102  102  102  103;
  153  204  255  255  255  255  255  255  255  254  255  255  255  255  255  255  255  255  255  205  153  153  153  153  153  153  153  153  152  152;
  204  254  254  254  254  254  254  254  254  254  255  255  255  255  255  255  255  255  255  255  204  204  204  204  204  204  204  204  204  204;
  ];
cboxes(:, :, 3) = ...
  [
  1    1    1    1    1    0    0    0    0    0    0    0    0    0    0   51   50   50   50   50   50   50   50   50   50   51    1    1    1    1;
  0    0    0    0    0    0    1    0    0    0    0    0    0    0   52  102  102  102  102  102  102  102  102  102  101  102   50    0    0    0;
  0    0    0    0    0    1    1    2    0    0    0    0    0   52  101  153  153  153  153  153  153  153  153  153  153  153  101   52    0    0;
  1    1    1    2    0    0    0    0    0    1    1    1   52  101  153  203  203  203  205  204  204  204  204  206  205  204  152  103   51    1;
  0    0    1    0    0    0    0    0    0    0    1   53  103  153  205  255  255  255  255  255  254  255  255  255  255  254  204  152  102   50;
  52   57   53   55   53   53   58   53   50   51   51  103  152  202  252  254  254  254  254  255  255  255  255  255  254  255  255  205  154  104;
  102  102  102  103  103  103  103  103  103  104  102  154  203  255  255  255  255  255  255  255  255  255  255  255  255  255  255  255  203  154;
  153  155  154  153  153  153  153  153  149  154  153  205  253  255  255  255  255  255  255  255  255  254  255  255  255  255  255  255  255  205;
  203  203  203  203  203  203  203  203  203  203  204  255  255  255  255  255  255  255  255  255  254  255  255  255  255  255  255  255  255  255;
  ];

ColourPerceptionImage = MatRowsColsRepeat(cboxes, scale);
ColourPerceptionImage = uint8(ColourPerceptionImage);

FunctionPath = mfilename('fullpath');
ChipsTablePath = strrep(FunctionPath, 'matlab/src/imagefactory/ColourPerception', 'matlab/data/mats/gts/ColourPerceptionGroundTruth.mat');
ChipsTableMat = load(ChipsTablePath);

GroundTruth = ChipsTableMat.ChipsTable();
GroundTruthImage = MatRowsColsRepeat(GroundTruth, scale);

end
